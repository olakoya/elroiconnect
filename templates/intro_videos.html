{% extends "base.html" %}

{% block navbar_logo %}
<a href="/" class="logo">
    <img src="{{ url_for('static', filename='logo-icon.svg') }}" alt="ElroiConnect" style="height: 50px;">
</a>
{% endblock %}

{% block navbar_center %}
<div class="navbar-center">
    <img src="{{ url_for('static', filename='logo-text.svg') }}" alt="ElroiConnect">
</div>
{% endblock %}

{% block content %}
<div class="card">
    <h2 style="color: #667eea; margin-bottom: 2rem;">Introduction Videos</h2>
    <p style="margin-bottom: 2rem; color: #666;">
        Please watch at least 2 videos before proceeding to registration.
    </p>
    
    <div style="display: grid; gap: 2rem; margin-bottom: 2rem;">
        <div>
            <h3>Video 0: Community Guidelines</h3>
            <video id="video0" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro0.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div>
            <h3>Video 1: About ElroiConnect</h3>
            <video id="video1" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro1.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div>
            <h3>Video 2: Community Guidelines</h3>
            <video id="video2" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div>
            <h3>Video 3: Safety and Privacy</h3>
            <video id="video3" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro3.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div>
            <h3>Video 4: Community Guidelines</h3>
            <video id="video4" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro4.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div>
            <h3>Video 5: Community Guidelines</h3>
            <video id="video5" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro5.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div>
            <h3>Video 6: Community Guidelines</h3>
            <video id="video6" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro6.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div>
            <h3>Video 7: Community Guidelines</h3>
            <video id="video7" width="100%" height="300" controls style="background: #000; border-radius: 5px;">
                <source src="/static/videos/intro7.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
    
    <div style="text-align: center;">
        <p id="videoCount" style="margin-bottom: 1rem; color: #666;">Videos watched: <strong>0/8</strong></p>
        <form action="{{ url_for('register') }}" method="GET">
            <input type="hidden" name="videos_watched" id="videosWatched" value="0">
            <button type="submit" id="proceedBtn" class="btn btn-primary" disabled>
                Proceed to Registration
            </button>
        </form>
    </div>
</div>

<script>
    let watchedVideos = new Set();
    
    document.querySelectorAll('video').forEach((video, index) => {
        video.addEventListener('ended', function() {
            watchedVideos.add(index);
            updateCount();
        });
    });
    
    function updateCount() {
        const count = watchedVideos.size;
        document.getElementById('videoCount').innerHTML = `Videos watched: <strong>${count}/3</strong>`;
        document.getElementById('videosWatched').value = count;
        
        if (count >= 2) {
            document.getElementById('proceedBtn').disabled = false;
        }
    }
</script>
{% endblock %}